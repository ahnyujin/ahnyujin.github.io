<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Effective Java - 2장. 객체 생성과 파괴" /><meta name="author" content="Yujin Ahn" /><meta property="og:locale" content="en" /><meta name="description" content="ITEM 1 - 생성자 대신 정적 팩토리 메서드를 고려하라" /><meta property="og:description" content="ITEM 1 - 생성자 대신 정적 팩토리 메서드를 고려하라" /><link rel="canonical" href="https://ahnyujin.github.io/posts/book-effective-java-1/" /><meta property="og:url" content="https://ahnyujin.github.io/posts/book-effective-java-1/" /><meta property="og:site_name" content="Yujin Ahn" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-12T01:39:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Effective Java - 2장. 객체 생성과 파괴" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yujin Ahn"},"dateModified":"2022-09-17T22:21:37+09:00","datePublished":"2022-09-12T01:39:00+09:00","description":"ITEM 1 - 생성자 대신 정적 팩토리 메서드를 고려하라","headline":"Effective Java - 2장. 객체 생성과 파괴","mainEntityOfPage":{"@type":"WebPage","@id":"https://ahnyujin.github.io/posts/book-effective-java-1/"},"url":"https://ahnyujin.github.io/posts/book-effective-java-1/"}</script><title>Effective Java - 2장. 객체 생성과 파괴 | Yujin Ahn</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Yujin Ahn"><meta name="application-name" content="Yujin Ahn"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Yujin Ahn</a></div><div class="site-subtitle font-italic">Yujin's Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ahnyujin" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ujahnn','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Effective Java - 2장. 객체 생성과 파괴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Effective Java - 2장. 객체 생성과 파괴</h1><div class="post-meta text-muted"><div> By <em> Yujin Ahn </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1662914340" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-12 </em> </span> <span> Updated <em class="timeago" data-ts="1663420897" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-17 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5168 words"> <em>28 min</em> read</span></div></div></div><div class="post-content"><h1 id="item-1---생성자-대신-정적-팩토리-메서드를-고려하라">ITEM 1 - 생성자 대신 정적 팩토리 메서드를 고려하라</h1><p>클래스는 클라이언트에 public 생성자 대신 정적 팩토리 메서드를 제공할 수 있다.</p><p>정적 팩토리 메서드 - 객체 생성을 하는 정적(static) 메서드</p><p>이런 경우 5가지 장점이 있다.</p><ol><li>이름을 가질 수 있다<ol><li>하나의 시그니처로는 하나의 생성자만 만들 수 있다. 의미가 명확하게 드러나는 이름으로 반환될 객체의 특성을 제대로 설명할 수 있다.</ol><li>호출될 때마다 인스턴스를 새로 생성하지 않아도 된다<ol><li>불변 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용할 수 있으므로 불필요한 객체 생성을 막을 수 있다.<li>정적 팩토리 방식의, 언제 어떤 인스턴스가 살아있게 할 지 통제하는 클래스를 인스턴스 통제(instance-controlled) 클래스라고 한다. 인스턴스를 통제하면 클래스를 싱글턴으로 만들 수도, 인스턴스화 불가로 만들 수도 있다. 또한 불변 값 클래스에서 동치인 인스턴스가 단 하나뿐임을 보장할 수도 있다.</ol><li>반환 타입의 하위 타입 객체를 반환할 수 있다<ol><li>구현 클래스를 공개하지 않고도 객체를 반환할 수 있어 API를 작게 만들 수 있다는 장점이 있다. ex) java.util.Collections</ol><li>입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다<ol><li>클라이언트는 팩토리가 건네주는 객체가 어떤 클래스의 인스턴스인지 알 수도, 알 필요도 없기에 유연하게 구현할 수 있다.</ol><li>정적 팩토리 메소드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다<ol><li>클라이언트가 서비스의 인스턴스를 얻을 때 사용하는 서비스 접근 API 역시 정적 팩토리이다. 서비스 제공자 인터페이스가 없다면 각 구현체를 인스턴스로 만들 때 리플렉션을 사용해야 한다.</ol></ol><p>단점은 다음과 같다.</p><ol><li>상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩터리 메서드만 제공하면 하위 클래스를 만들 수 없다.<li>정적 팩토리 메서드는 프로그래머가 찾기 어렵다.<ol><li>이러한 문제를 해결하기 위해 흔히 사용하는 명명 방식들은<li>from : 하나의 매개변수를 받아 객체를 생성 (형변환)<li>of : 여러개의 매개변수를 받아 객체를 생성<li>valueOf : from과 of의 더 자세한 버전<li><div class="table-wrapper"><table><tbody><tr><td>instance<td>getInstance : 인스턴스를 생성하지만, 같은 인스턴스임은 보장하지 않는다</table></div><li><div class="table-wrapper"><table><tbody><tr><td>create<td>newInstance : 새로운 인스턴스 생성 등이 있다.</table></div></ol></ol><h1 id="item-2---생성자에-매개변수가-많다면-빌더를-고려하라">ITEM 2 - 생성자에 매개변수가 많다면 빌더를 고려하라</h1><p>정적 팩터리와 생성자는 선택적 매개변수가 많을 때 대응하기 어렵다</p><h2 id="점층적-생성자-패턴telescoping-constructor-pattern"><span class="mr-2">점층적 생성자 패턴(telescoping constructor pattern)</span><a href="#점층적-생성자-패턴telescoping-constructor-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NutritionFacts</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">calories</span><span class="o">;</span>      <span class="c1">// 필수</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">fat</span><span class="o">;</span>           <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">sodium</span><span class="o">;</span>        <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">carbonhydrate</span><span class="o">;</span> <span class="c1">// 선택</span>

	<span class="kd">public</span> <span class="nf">NutritionFacts</span><span class="o">(</span><span class="kt">int</span> <span class="n">calories</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">(</span><span class="n">calories</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">NutritionFacts</span><span class="o">(</span><span class="kt">int</span> <span class="n">calories</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fat</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">(</span><span class="n">calories</span><span class="o">,</span> <span class="n">fat</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">...</span>

	<span class="kd">public</span> <span class="nf">NutritionFacts</span><span class="o">(</span><span class="kt">int</span> <span class="n">calories</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fat</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sodium</span><span class="o">,</span> <span class="kt">int</span> <span class="n">carbonhydrate</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">calories</span> <span class="o">=</span> <span class="n">calories</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">fat</span> <span class="o">=</span> <span class="n">fat</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sodium</span> <span class="o">=</span> <span class="n">sodium</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">carbonhydrate</span> <span class="o">=</span> <span class="n">carbonhydrate</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>필수 매개변수만 받는 생성자, 필수 매개변수 1개와 선택 매개변수 1개를 받는 생성자 … 전부 다 받는 생성자로 늘려나가는 형태. 인스턴스를 만들려면 원하는 매개변수를 포함하는 가장 짧은 생성자를 사용하면 된다.</p><p>선택 매개변수의 수가 많아지면 읽기도 어렵고, 코드를 작성하기도 어렵다.</p><h2 id="자바빈즈-패턴javabeans-pattern"><span class="mr-2">자바빈즈 패턴(JavaBeans pattern)</span><a href="#자바빈즈-패턴javabeans-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>매개변수가 없는 생성자로 객체를 만들고, setter 메서드를 통해 매개변수의 값을 설정한다</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NutritionFacts</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">calories</span>      <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 필수</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">fat</span>           <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">sodium</span>        <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">carbonhydrate</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 선택</span>

	<span class="kd">public</span> <span class="nf">NutritionFacts</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCalories</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span>      <span class="o">{</span> <span class="n">calories</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFat</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span>           <span class="o">{</span> <span class="n">fat</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSodium</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span>        <span class="o">{</span> <span class="n">sodium</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCarbonhydrate</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="n">carbonhydrate</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>코드가 길지만 점층적 생성자 패턴에 비해 더 읽기 쉽고 인스턴스를 만들기도 쉽다.</p><p>그러나 심각한 단점을 가지고 있다. 객체를 하나 만드려면 여러 setter를 호출해야 하고, 객체가 완전히 생성되기 이전에는 일관성(consistency)이 무너진 상태에 놓이게 된다(오히려 일관성 면에서는 점층적 생성자 패턴이 유리하다). 일관성이 깨진 객체는 버그를 심은 코드와 그 버그 때문에 런타임에 문제를 겪는 코드가 물리적으로 멀 것이므로 디버깅이 어렵다. 클래스를 불변으로 만들 수도 없으므로 스레드 안전성을 위해 프로그래머의 추가 작업이 필요하다.</p><h2 id="빌더-패턴builder-pattern"><span class="mr-2">빌더 패턴(Builder pattern)</span><a href="#빌더-패턴builder-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>스레드 안전성과 가독성을 지키는 방법이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NutritionFacts</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">calories</span><span class="o">;</span>      <span class="c1">// 필수</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">fat</span><span class="o">;</span>           <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">sodium</span><span class="o">;</span>        <span class="c1">// 선택</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">carbonhydrate</span><span class="o">;</span> <span class="c1">// 선택</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Builder</span> <span class="o">{</span>
	  <span class="c1">// 필수 매개변수</span>
	  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">calories</span><span class="o">;</span>

	  <span class="c1">// 선택 매개변수 - 기본값으로 초기화</span>
	  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">fat</span>           <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">sodium</span>        <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">carbonhydrate</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

	  <span class="kd">public</span> <span class="nf">Builder</span><span class="o">(</span><span class="kt">int</span> <span class="n">calories</span><span class="o">)</span> <span class="o">{</span>
	    <span class="k">this</span><span class="o">.</span><span class="na">calories</span> <span class="o">=</span> <span class="n">calories</span><span class="o">;</span>
	  <span class="o">}</span>

	  <span class="kd">public</span> <span class="nc">Builder</span> <span class="nf">fat</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
	   <span class="n">fat</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
	   <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	  <span class="o">}</span>

	  <span class="kd">public</span> <span class="nc">Builder</span> <span class="nf">sodium</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
	   <span class="n">sodium</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
	   <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	  <span class="o">}</span>

	  <span class="kd">public</span> <span class="nc">Builder</span> <span class="nf">carbonhydrate</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
	   <span class="n">carbonhydrate</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
	   <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
	  <span class="o">}</span>

		<span class="kd">public</span> <span class="nc">NutritionFacts</span> <span class="nf">build</span><span class="o">()</span> <span class="o">{</span>
	    <span class="k">return</span> <span class="k">new</span> <span class="nf">NutritionFacts</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
	  <span class="o">}</span>
  <span class="o">}</span>

	<span class="kd">private</span> <span class="nf">NutritionFacts</span><span class="o">(</span><span class="nc">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
	  <span class="n">calories</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">calories</span><span class="o">;</span>
		<span class="n">fat</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">fat</span><span class="o">;</span>
		<span class="n">sodium</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">sodium</span><span class="o">;</span>
		<span class="n">carbonhydrate</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">carbonhydrate</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ol><li>클라이언트는 필요한 객체를 직접 만드는 대신 필수 매개변수만으로 생성자를 호출해 빌더 객체를 얻는다<li>빌더 객체가 제공하는 세터 메소드들로 원하는 선택 매개변수들을 설정한다<li>마지막으로 매개변수가 없는 build 메서드를 호출해 객체(일반적으로 불변)를 얻는다.</ol><p><strong>빌더의 세터 메서드들은 빌더 자신을 반환해 연쇄적으로 호출할 수 있다. 이러한 방식을 fluent API 혹은 method chaining이라고 한다</strong></p><p>단점은 빌더 생성 코드가 장황해서 매개변수 4개 이상은 되어야 값어치를 한다는 것이다. 그러나 시간이 지날수록 매개변수는 많아질 것이므로 처리해야 할 매개변수가 많다면 빌더 패턴을 사용하는것이 좋다.</p><h1 id="item-3---private-생성자나-열거-타입으로-싱글턴임을-보증하라">ITEM 3 - private 생성자나 열거 타입으로 싱글턴임을 보증하라</h1><p>싱글턴(singleton)이란? 인스턴스를 하나만 생성할 수 있는 클래스</p><p>싱글턴을 만드는 방법 두가지를 소개한다. 두 방식 모두 생성자는 private으로 감춘다.</p><h2 id="public-static-final-필드-방식의-싱글턴"><span class="mr-2">public static final 필드 방식의 싱글턴</span><a href="#public-static-final-필드-방식의-싱글턴" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Elvis</span> <span class="o">{</span>
	<span class="o">**</span><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Elvis</span> <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Elvis</span><span class="o">();**</span>
	<span class="kd">private</span> <span class="nf">Elvis</span><span class="o">()</span> <span class="o">{...}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">leaveTheBuilding</span><span class="o">()</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>장점은 public static 필드가 final이니 클래스가 싱글턴임이 명확하다.</p><h2 id="정적-팩토리-방식의-싱글턴"><span class="mr-2">정적 팩토리 방식의 싱글턴</span><a href="#정적-팩토리-방식의-싱글턴" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Elvis</span> <span class="o">{</span>
	<span class="o">**</span><span class="kd">private</span><span class="o">**</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Elvis</span> <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Elvis</span><span class="o">();</span>
	<span class="kd">private</span> <span class="nf">Elvis</span><span class="o">()</span> <span class="o">{...}</span>
	<span class="o">**</span><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Elvis</span> <span class="n">getInstance</span><span class="o">**()</span> <span class="o">{</span> <span class="k">return</span> <span class="no">INSTANCE</span><span class="o">;</span> <span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">leaveTheBuilding</span><span class="o">()</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>getInstance는 항상 같은 객체의 참조를 반환하므로 싱글턴을 유지할 수 있다.</p><p>장점은 API를 바꾸지 않고도 싱글턴이 아니게 변경 가능하다는 점이다.</p><p>그러나 위의 두 방식으로 만든 싱글턴 클래스를 역직렬화 할 때마다 새로운 인스턴스가 생성되는 의도치 않은 문제가 생기기 때문에 아래와 같이 readResolve 메서드를 추가해 주어야 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c1">// 싱글턴임을 보장해주는 readResolve 메서드</span>
<span class="kd">private</span> <span class="nc">Object</span> <span class="nf">readResolve</span><span class="o">()</span> <span class="o">{</span>
 <span class="c1">// 진짜 Elvis를 반환하고, 가짜 Elvis는 가비지 컬렉터에 맡긴다.</span>
 <span class="k">return</span> <span class="no">INSTANCE</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>또한 예외적으로 리플렉션 API인 AccessibleObject.setAccessible을 사용해 private 생성자를 호출할 수 있다. 이러한 경우는 생성자에서 두 번 이상 객체가 생성되려 할 때 예외를 던지게 하면 된다.</p><h2 id="enum-타입-방식의-싱글턴"><span class="mr-2">Enum 타입 방식의 싱글턴</span><a href="#enum-타입-방식의-싱글턴" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Elvis</span> <span class="o">{</span>
  <span class="no">INSTANCE</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">leaveTheBuilding</span><span class="o">()</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>원소가 하나뿐인 Enum으로 싱글턴을 만드는 것.</p><p>추가 작업 없이 직렬화에 유리하다. 위의 두 방법보다 추천. 그러나 만드려는 싱글턴이 Enum 외의 클래스를 상속해야 한다면 사용할 수 없다.</p><h1 id="item-4---인스턴스화를-막으려거든-private-생성자를-사용하라">ITEM 4 - 인스턴스화를 막으려거든 private 생성자를 사용하라</h1><p>정적 멤버만 담은 유틸리티 클래스와 같이, 클래스의 의도를 명확히 하기 위해 인스턴스화를 막아야 하는 경우가 있다.</p><p>인스턴스화를 막으려면 private 생성자를 추가하자.</p><p>명시된 생성자가 없으면 컴파일러가 기본 생성자를 자동 생성하고, 사용자는 이 생성자가 자동생성 된 것인지 구분할 수 없기 때문이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UtilityClass</span> <span class="o">{</span>
  <span class="c1">// 기본 생성자가 만들어지는 것을 막는다(인스턴스화 방지용)</span>
	<span class="o">**</span><span class="kd">private</span> <span class="nc">UtilityClass</span><span class="o">**()</span> <span class="o">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nf">AssertionError</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위의 private 생성자를 사용한 코드는 두가지 장점이 있다</p><ol><li>클래스 인스턴스화를 막아준다<ol><li>그러나 직관적이지 않은 코드이니, ‘인스턴스화 방지용’과 같은 주석을 달아주자</ol><li>상속을 불가능하게 한다<ol><li>하위클래스가 상위클래스의 생성자에 접근할 수 없어 생성자를 호출할 수 없다</ol></ol><h1 id="item-5---자원을-직접-명시하지-말고-의존-객체-주입을-사용하라">ITEM 5 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라</h1><p>클래스가 내부적으로 하나 이상의 자원에 의존하고, 그 자원이 클래스의 동작에 영향을 주는 경우 정적 유틸리티 클래스나 싱글턴 방식이 적합하지 않다. ex) 맞춤법 검사기와 같이 사용하는 자원(언어, 특수 어휘 등…)에 따라 동작이 달라지는 클래스. 또한 이러한 경우에는 클래스가 직접 자원들을 만들게 해서도 안된다. 대신 필요한 자원을 (혹은 자원을 만드는 팩터리를) 생성자에 (혹은 정적 팩터리나 빌더에) 넘겨준다. 이 기법을 의존 객체 주입이라고 한다. 클래스의 유연성, 재사용성, 테스트 용이성을 개선해준다.</p><h1 id="item-6---불필요한-객체-생성을-피하라">ITEM 6 - 불필요한 객체 생성을 피하라</h1><p>필요없는 객체의 반복 생성을 막고 기존 객체를 재사용할 수 있는 방법들이다.</p><h2 id="문자열-리터럴을-사용하는-모든-코드가-같은-객체를-재사용함을-보장하라"><span class="mr-2">문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함을 보장하라</span><a href="#문자열-리터럴을-사용하는-모든-코드가-같은-객체를-재사용함을-보장하라" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"utility"</span><span class="o">);</span>
<span class="c1">// 위의 코드 대신</span>
<span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"utility"</span>
</pre></table></code></div></div><p>같은 가상 머신 안에서 사용하는 동일한 문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함이 보장된다.</p><h2 id="불변-클래스에서-생성자-대신-정적-팩토리-메서드를-사용한다"><span class="mr-2">불변 클래스에서 생성자 대신 정적 팩토리 메서드를 사용한다</span><a href="#불변-클래스에서-생성자-대신-정적-팩토리-메서드를-사용한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Boolean(String) 생성자 대신 Boolean.valueOf(String) 을 사용하는 것이 좋다.</p><h2 id="생성비용이-비싼-객체를-반복해-사용한다면-캐싱을-사용하자"><span class="mr-2">생성비용이 비싼 객체를 반복해 사용한다면 캐싱을 사용하자</span><a href="#생성비용이-비싼-객체를-반복해-사용한다면-캐싱을-사용하자" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isRomanNumeral</span><span class="o">(</span><span class="nc">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="s">"^(?=.)M*(C[MD]|D?C{0,3})"</span>
          <span class="o">+</span> <span class="s">"(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$"</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위 코드의 단점은 String.matches 메서드가 Pattern 인스턴스를 한번 생성하고, 쓰고 버린다는 것이다. 성능이 중요한 경우 이 메서드를 반복해서 사용하는 것은 적합하지 않다.</p><p>성능을 개선하기 위해 정규표현식을 표현하는 (불변)Pattern 인스턴스를 클래스 초기화(정적 초기화)과정에서 직접 생성해 캐싱해두고, 메서드가 호출될 때마다 이 인스턴스를 재사용한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RomanNumerals</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Pattern</span> <span class="no">ROMAN</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span>
    <span class="s">"^(?=.)M*(C[MD]|D?C{0,3})"</span>
    <span class="o">+</span> <span class="s">"(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$"</span><span class="o">);</span>

  <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isRomanNumeral</span><span class="o">(</span><span class="nc">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="no">ROMAN</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">s</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="박싱된-기본타입보다-기본타입을-사용하고-의도치-않은-오토박싱이-숨어들지-않도록-하자"><span class="mr-2">박싱된 기본타입보다 기본타입을 사용하고 의도치 않은 오토박싱이 숨어들지 않도록 하자</span><a href="#박싱된-기본타입보다-기본타입을-사용하고-의도치-않은-오토박싱이-숨어들지-않도록-하자" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">private</span> <span class="kd">static</span> <span class="kt">long</span> <span class="nf">sum</span><span class="o">()</span> <span class="o">{</span>
  <span class="nc">Long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
  <span class="k">for</span><span class="o">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>

  <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위 코드의 sum 변수의 타입을 long으로 변경하면 불필요한 Long 인스턴스를 231개나 아낄 수 있고, 속도도 6.3초에서 0.59초로 빨라진다.</p><h1 id="item-7---다-쓴-객체-참조를-해제하라">ITEM 7 - 다 쓴 객체 참조를 해제하라</h1><p>자바와 같은 가비지 컬렉션 언어에서 또한 메모리 누수에 주의하자. 객체 참조 하나를 회수하지 않으면 가비지 컬렉터는 그 객체가 참조하는 모든 객체를 회수하지 못한다. 따라서 성능에 악영향을 줄 수 있다.</p><p>참조를 담은 변수의 scope를 최소가 되도록 적절히 정의했다면 변수가 유효 범위(scope)밖으로 벗어나는 때에 참조 해제는 자연스럽게 일어난다. 다만 아래와 같은 경우들은 객체 참조 해제에 유의하는 것이 좋다.</p><h2 id="자기-메모리를-직접-관리하는-클래스"><span class="mr-2">자기 메모리를 직접 관리하는 클래스</span><a href="#자기-메모리를-직접-관리하는-클래스" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>자기 메모리를 직접 관리하는 클래스의 경우 메모리 누수에 주의해야 한다.</p><p>객체 참조를 담는 스택을 예시로 들면 비활성 영역은 더이상 사용되지 않는다. 가비지 컬렉터는 이러한 사실을 알 길이 없다. 그러므로 프로그래머는 비활성 영역이 되는 순간에 객체를 더이상 사용하지 않을것을 알리기 위해 null 처리 해야한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">Object</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">EmptyStackException</span><span class="o">();</span>
  <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">elements</span><span class="o">[--</span><span class="n">size</span><span class="o">];</span>
  <span class="o">**</span><span class="n">elements</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// 참조 해제**</span>
  <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>위 코드의 또다른 장점은 해제한 참조를 이후에 사용했을 때 프로그램이 NullPointerException을 던지며 종료된다는 것이다. 프로그램의 오류는 가능한 조기에 발견되는 것이 좋다.</p><h2 id="캐시"><span class="mr-2">캐시</span><a href="#캐시" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>객체 참조를 캐시에 넣고 더이상 사용하지 않을 경우</p><p>만약 캐시 외부에서 <strong>키</strong>를 참조하는 동안만 엔트리가 살아있는 캐시가 필요하다면 WeakHashMap을 사용한다. 이렇게 하면 다 쓴 엔트리는 즉시 자동으로 제거된다.</p><p>이외에 엔트리 유효기간을 정확히 정의하기 어려울 경우, ScheduledThreadPoolExecutor와 같은 백그라운드 스레드를 사용하는 방법, 캐시에 새 엔트리를 추가할 때 추가 작업을 수행해주는 방법이 있다.</p><h2 id="listener-혹은-callback"><span class="mr-2">listener 혹은 callback</span><a href="#listener-혹은-callback" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>클라이언트가 콜백을 등록만 하고 해지하지 않는다면 콜백은 계속해서 쌓이기만 한다. 이러한 경우 콜백을 약한 참조(weak reference)로 저장하여 가비지 컬렉터가 즉시 수거해 가게끔 한다. ex) WeakHashMap에 키로 저장</p><h1 id="item-8---finalizer와-cleaner사용을-피하라">ITEM 8 - finalizer와 cleaner사용을 피하라</h1><p>자바에서는 객체 소멸자로 finalizer를 사용해왔다. finalizer는 예측이 어렵고 느리고 불편하여 자바9에서 cleaner사용을 권고하고 finalizer를 deprecated API로 지정하였다. 그러나 cleaner 역시도 동일한 단점을 가지고 있으며 일반적으로 불필요하다.</p><p>cleaner와 finalizer는 즉시 실행을 보장하지 않아 예측이 어렵다. 실행 시점은 전적으로 가비지 컬렉터의 구현에 의존한다.</p><p>cleaner의 쓰임은 아래 두가지의 경우이다. 사용시 불확실성과 성능 저하에 유의하자.</p><ol><li>자원의 소유자가 close 메서드를 부르지 않는 것에 대한 안전망 역할<ol><li>cleaner와 finalizer가 즉시 실행된다는 보장은 없지만 자원 회수를 늦게라도 해주는 것에 의의를 둔다<li>예) 자바 라이브러리 중 FileInputStream, FileOutputStream, ThreadPoolExecutor</ol><li>중요하지 않은 네이티브 자원(native peer) 회수<ol><li>가비지 컬렉터가 인식하지 못하는 네이티브 객체를 회수할 때 사용한다.<li>그러나 성능 저하와 즉시 회수가 불가능함을 감수해야 한다. 따라서 심각한 자원에는 사용할 수 없다.</ol></ol><p>위의 케이스에 해당하지 않는다면</p><p>AutoCloseable을 구현하고, 클라이언트에서 인스턴스를 다 사용하고 나면 close 메서드를 호출한다. 이 때 각 인스턴스는 자신이 닫혀있는지 추적하는것이 좋다. close 메서드는 이 객체가 더이상 유효하지 않음을 필드에 기록하고 다시 불린다면 IllegalStateException을 던지도록 구현한다.</p><h1 id="item-9---try-finally-보다는-try-with-resources를-사용하라">ITEM 9 - try-finally 보다는 try-with-resources를 사용하라</h1><p>close메서드를 호출해 직접 닫아줘야 하는 자원이 제대로 닫힘을 보장하는 수단으로 try-finally를 사용해 왔다. finalizer도 사용했지만 finalizer는 단점이 많았다. 자바 7의 try-with-resources는 기존 try-finally의 기능과 단점들을 커버한다.</p><p>try-finally의 단점</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">firstLineOfFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
  <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="n">path</span><span class="o">));</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>하지만 자원이 둘 이상이면 코드가 지저분해진다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="kt">void</span> <span class="nf">copy</span><span class="o">(</span><span class="nc">String</span> <span class="n">src</span><span class="o">,</span> <span class="nc">String</span> <span class="n">dst</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
  <span class="nc">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="nc">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">dst</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="no">BUFFER_SIZE</span><span class="o">];</span>
      <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
      <span class="k">while</span><span class="o">((</span><span class="n">n</span><span class="o">=</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="o">)</span>
        <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>또한 디버깅이 어렵다. try 블록에서 예외가 생기고 finally 블록에서도 예외가 생겼을 경우, 스택 추적 내역에 두번째 예외의 정보만 남고 첫번째 예외에 대한 정보가 남지 않을 것이기 때문이다.</p><p>try-with-resources 구조를 사용하려면 해당 자원이 AutoCloseable 인터페이스를 구현해야 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">firstLineOfFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="n">path</span><span class="o">)))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>자원이 둘 이상이라도 아래와 같이 깔끔하게 코드를 작성할 수 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="kt">void</span> <span class="nf">copy</span><span class="o">(</span><span class="nc">String</span> <span class="n">src</span><span class="o">,</span> <span class="nc">String</span> <span class="n">dst</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
       <span class="nc">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="n">dst</span><span class="o">))</span> <span class="o">{</span>
	  <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="no">BUFFER_SIZE</span><span class="o">];</span>
	  <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
	  <span class="k">while</span><span class="o">((</span><span class="n">n</span><span class="o">=</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="o">)</span>
	  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>디버깅도 간단하다. readLine과 close 호출 양쪽 모두 예외가 발생해도, close측의 예외는 <strong>숨겨지고</strong> readLine의 예외가 기록된다. 숨겨진 예외는 surpressed라는 꼬리표를 달고 스택 추적 내역에 출력된다.</p><p>catch 절을 사용하여 다수의 예외처리를 try문을 중첩하지 않고 할 수도 있다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">firstLineOfFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">,</span> <span class="nc">String</span> <span class="n">defaultVal</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="n">path</span><span class="o">)))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">defaultVal</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/book/'>Book</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >JAVA</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Effective+Java+-+2%EC%9E%A5.+%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1%EA%B3%BC+%ED%8C%8C%EA%B4%B4+-+Yujin+Ahn&url=https%3A%2F%2Fahnyujin.github.io%2Fposts%2Fbook-effective-java-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Effective+Java+-+2%EC%9E%A5.+%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1%EA%B3%BC+%ED%8C%8C%EA%B4%B4+-+Yujin+Ahn&u=https%3A%2F%2Fahnyujin.github.io%2Fposts%2Fbook-effective-java-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fahnyujin.github.io%2Fposts%2Fbook-effective-java-1%2F&text=Effective+Java+-+2%EC%9E%A5.+%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1%EA%B3%BC+%ED%8C%8C%EA%B4%B4+-+Yujin+Ahn" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/book-software-architecture-101/">소프트웨어 아키텍처 101 / 마크 리처드, 닐 포드</a><li><a href="/posts/aws-docs/">AWS Docs</a><li><a href="/posts/book-effective-java-1/">Effective Java - 2장. 객체 생성과 파괴</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/agile/">Agile</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/msa/">MSA</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/tdd/">TDD</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/book-test-driven-development/"><div class="card-body"> <em class="timeago small" data-ts="1662309540" > 2022-09-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Test-Driven Development / Kent Beck</h3><div class="text-muted small"><p> 프로그래머는 자기 작업의 품질에 대해 우선적으로 책임을 질 수 있어야 한다. 테스트 주도 개발은 책임을 맡는 방법이다. 테스트 주도 개발은 테스트라는 매커니즘을 통해 프로그래밍을 하며 생기는 두려움을 방지해 행동하고, 커뮤니케이션하게 한다.(용기) 이 책을 통해 작업을 단순하게 시작하고 자동화된 테스트를 만들고 새로운 설계 결정을 하...</p></div></div></a></div><div class="card"> <a href="/posts/book-extreme-programming/"><div class="card-body"> <em class="timeago small" data-ts="1672628880" > 2023-01-02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Extreme Programming / Kent Beck</h3><div class="text-muted small"><p> Extreme Programming(XP)는 무엇인가 XP는 Agile 프레임워크 중 하나, 소프트웨어 개발의 제약 조건들을 다루는 것에 바탕을 둔 방법론 방법론이란 ‘성공을 보장하려면 따라야 하는 규칙들의 집합’으로 해석되지만, XP는 팀마다 적용 방식이 다를 수 있고 XP를 적용하여도 성공 수준이 모두 다르다 ...</p></div></div></a></div><div class="card"> <a href="/posts/book-msa-overview/"><div class="card-body"> <em class="timeago small" data-ts="1673750700" > 2023-01-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>그림으로 공부하는 마이크로서비스 구조 / 다루사와 히로유키 외 6명</h3><div class="text-muted small"><p> 그림으로 공부하는 마이크로서비스 구조 마이크로서비스란 IaaS 이후 빨라진 인프라 구축 속도에 맞추어 애플리케이션 개발/운영을 신속하게 진행하기 위해 필요한 설계, 개발, 운영 기법을 모은 것. 클라우드 네이티브 컴퓨팅 컨테이너, 오케스트레이션, 마이크로서비스 개발/운영속도 향상 품질 개선 컨테이너와 오케스트레이션을 이...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/book-test-driven-development/" class="btn btn-outline-primary" prompt="Older"><p>Test-Driven Development / Kent Beck</p></a> <a href="/posts/aws-docs/" class="btn btn-outline-primary" prompt="Newer"><p>AWS Docs</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://ahnyujin.github.io/posts/book-effective-java-1/'; this.page.identifier = '/posts/book-effective-java-1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://ahnyujin-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ahnyujin">Yujin Ahn</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/agile/">Agile</a> <a class="post-tag" href="/tags/architecture/">Architecture</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/msa/">MSA</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/tdd/">TDD</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
