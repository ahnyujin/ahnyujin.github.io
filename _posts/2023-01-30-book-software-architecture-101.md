---
title: 소프트웨어 아키텍처 101 / 마크 리처드, 닐 포드
author: Yujin Ahn
date: 2023-01-30 10:50:00 +0900
categories: [Blogging, Book]
tags: [Architecture]
---

# 소프트웨어 아키텍처 101 - 마크 리처즈, 닐 포드

소프트웨어 아키텍트의 길은 왜 분명하지 않을까?

1. 직업 자체에 대한 명확한 정의가 없다
2. 업무 범위가 방대하다
    1. 과거 모듈성, 컴포넌트, 패턴 등 순수 기술적인 부분 + MSA 등 계속해서 확대
3. 소프트웨어 개발 생태계 발전에 따라 끊임없이 변화한다
4. 관련 자료들은 역사적 연관성을 강조한다

따라서 아키텍처를 공부하며 명심해야 할 것은, 현재의 환경에 맞는 결정을 하는 것이다.

소프트웨어 아키텍처는 시스템의 청사진이다. 시스템 아키텍처를 이해하는 방법 중 하나는 아래와 같다.

- 아키텍처 특성
- 아키텍처 결정
    - 반드시 지켜야 할 원칙
    - 시스템 제약 조건을 형성
- 설계 원칙
    - 가이드라인
- 시스템 구조
    - 마이크로서비스, 레이어드, 마이크로커널 등

또한 소프트웨어 아키텍처의 모든 것은 다 trade-off이며, ‘어떻게’보다 ‘왜’에 더 주목해야 한다.

# 아키텍처 사고

아키텍처 사고란 아키텍처와 설계의 차이를 알고 둘을 통합한 솔루션을 모색하는 것.

- 아키텍처: 비즈니스 요구사항 분석→아키텍처 특성, 스타일, 컴포넌트 구조 도출
- 설계 : 아티팩트 → 컴포넌트의 클래스 설계, UI, 소스 코드

전통적인 역할 모델은 아키텍처→ 설계 단방향 이었으나, 제대로 된 아키텍처를 만들려면 소통의 단절을 부수고, 협력하여 프로젝트 생명 주기의 일부로 동기화 되어야 한다.

## 트레이드오프 분석

![Untitled](/assets/img/posts/architecture_trade_off.png)

입찰 프로듀서 서비스가 입찰을 생성하고 그 금액을 입찰 캡처, 추적, 분석 서비스에 전달하는 경매 시스템을 설계한다고 가정한다.

토픽을 이용한 서비스 간 통신을 이용할 경우

- 장점
    - 아키텍처 확장성(extensibility)
        - 입찰 이력을 조회하는 새로운 서비스를 도입하더라도 변경할 필요가 없는 구조이다.
    - 서비스 디커플링
        - 입찰 프로듀서 서비스는 입찰 정보를 어느 서비스가 어떻게 사용하는지 모른다
- 단점
    - 데이터 액세스, 보안 문제
        - 누구나 입찰 데이터에 액세스할 수 있으며 도청이 쉽다.
    - 서로 다른 계약 지원 불가
        - 토픽을 수신한 모든 서비스는 동일한 계약 및 데이터 세트를 받아야 한다.
    - 모니터링과 프로그래밍 방식의 확장성 떨어짐
        - 토픽 메시지 개수를 모니터링할 수 없고, auto-scaling 기능이 지원되지 않음

큐를 이용한 서비스 간 통신을 이용할 경우

- 장점
    - 데이터 액세스, 보안 문제
        - 큐를 수신하는 지정된 컨슈머만 접근 가능하다.
    - 개별 계약 지원
        - 토픽을 수신한 모든 서비스는 동일한 계약 및 데이터 세트를 받아야 한다.
    - 모니터링과 프로그래밍 방식의 확장성
        - 각 큐를 개별 모니터링 + 컨슈머 개별 로드 밸런싱 가능
- 단점
    - 아키텍처 확장성 떨어짐
        - 입찰 이력을 조회하는 새로운 서비스를 도입한다면, 서비스용 큐가 새로 필요하고, 프로듀서 서비스에 대한 변경이 불가피하다.
    - 서비스 커플링
        - 입찰 프로듀서 서비스는 입찰 정보가 어느 서비스에 어떻게 사용하는지 정확히 안다.

소프트웨어 아키텍처는 이런 트레이드오프를 분석하고 비즈니스 동인, 환경 등의 팩터에 따라 더 나은 방법을 택한다. (It depends!)

## 아키텍트가 코딩 실무 능력 유지하는 방법

- POC(proof-of-concept)를 자주 해본다
    - 각 제품을 응용한 예제 코드를 작성하고 실행 결과를 비교하여 공수, 솔루션의 확장성, 성능, 내고장성등의 아키텍처 특성을 비교한다.
    - 가능한 프로덕션 수준의 좋은 코드를 작성하여 레퍼런스 아키텍처나 다른 사람들이 참고할만한 샘플 코드로 만들자.
- 기술 부채 스토리나 아키텍처 스토리에 전념한다
- 버그를 잡는다
- 개발팀 프로세스 자동화 툴을 만든다
- 피트니스 함수를 사용해 아키텍처 컴플라이언스를 자동화한다
- 코드리뷰를 한다
